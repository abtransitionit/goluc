name: smalln
description: a small workflow
phases:
  NodeSsh:
    description: Check if VMs are SSH reachable
    node: all
    fn: vm.CheckVmSshAccess
    Dependency: []

  LucAgent:
    description: Copy LUC CLI agent to all VMs
    node: all
    fn: luc.DeployLuc
    Dependency:
      - NodeSsh

  OsUpgrade:
    description: Provision OS nodes with latest dnfapt packages and repositories
    node: all
    fn: dnfapt.UpgradeVmOs
    Dependency:
      - LucAgent

  AppUpdate:
    description: Provision required/missing standard dnfapt packages
    node: all
    fn: dnfapt.UpdateVmOsApp
    params:
      daPkgKey: da.pkg.required
    Dependency:
      - OsUpgrade
