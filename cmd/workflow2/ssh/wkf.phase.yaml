name: ssh
description: test Ssh access
phases:
  Conf:
    description: check node is SSH configured on the host (aka. ~/.ssh/config.d/)
    node: node.test
    fn: CheckSshConf
    param: 
      - node.all

  SshAccess:
    description: Check node is SSH reachable from the host
    node: node.bastion
    fn: CheckSshAccess
    param:
      - node.all
    dependency:
      - Conf

  SshOnline:
    description: Check node is SSH reachable from a host within a delay
    node: node.bastion
    fn: CheckIsSshOnline
    param:
      - node.all
      - ssh.delay
    dependency:
      - Conf
