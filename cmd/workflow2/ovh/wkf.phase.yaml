name: ovh
description: manage OVH objects
phases:


  ListVpsOsImage:
    description: list availbale OVH VPS OS images (api call)
    node: node.local
    fn: ListVpsOsImage

  RenewOvhToken:
    description: generate and store locally an OVH token
    node: node.local
    fn: RenewOvhToken

  ListInfo:
    description: display informations on OVH API
    node: node.local
    fn: ListInfo

  InstallVpsImage:
    description: Re-install the same OS image on a OVH Vps
    node: node.o3r
    fn: InstallVpsImage
    dependency: 
      - ListInfo


  WaitIsOnline:
    description: Check a node is ssh reachable from a host within a delay
    node: node.bastion
    fn: WaitIsOnline
    param: 
      - node.all
      - ssh.delay
    dependency:
      - InstallVpsImage
